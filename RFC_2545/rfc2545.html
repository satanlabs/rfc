<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://dublincore.org/documents/2008/08/04/dc-html/">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="robots" content="index,follow" />
    <meta name="creator" content="rfcmarkup version 1.129b" />
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
      <meta name="DC.Identifier" content="urn:ietf:rfc:2545" />
      <meta name="DC.Relation.Replaces" content=""/><meta name="DC.Creator" content="P. Marques"><meta name="DC.Creator" content="F. Dupont"><meta name="DC.Date.Issued" content="March, 1999"/>
       <meta name="DC.Title" content=" Use of BGP-4 Multiprotocol Extensions for IPv6 Inter-Domain Routing "/>
       <title>RFC 2545:  Use of BGP-4 Multiprotocol Extensions for IPv6 Inter-Domain Routing </title>    
        

        <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->    <script type="text/javascript"><!--
    function addHeaderTags() {
        var spans = document.getElementsByTagName("span");
        for (var i=0; i < spans.length; i++) {
            var elem = spans[i];
            if (elem) {
                var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";               
                }
            }
        }
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script><span class="pre noprint docinfo">[<a href="https://www.rfc-editor.org" title="RFC Editor">RFC Home</a>] [<a href=/rfc/rfc2545.txt>TEXT</a>|<a href=/rfc/pdfrfc/rfc2545.txt.pdf>PDF</a>|<a href=/rfc/rfc2545.html>HTML</a>] [<a href='https://datatracker.ietf.org/doc/rfc2545' title='IETF Datatracker information for this document'>Tracker</a>] [<a href="https://datatracker.ietf.org/ipr/search/?rfc=2545&submit=rfc" title="IPR disclosures related to this document">IPR</a>]                              </span><br/><span class="pre noprint docinfo">                                                                        </span><br /><span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br /><span class="pre noprint docinfo">                                                                        </span><pre>Network Working Group                                        P. Marques
Request for Comments: 2545                          cisco Systems, Inc.
Category: Standards Track                                     F. Dupont
                                                                  Inria
                                                             March 1999


  <span class="h1">Use of BGP-4 Multiprotocol Extensions for IPv6 Inter-Domain Routing</span>

Status of this Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (1999).  All Rights Reserved.

Abstract

   BGP-4 Multiprotocol Extensions [<a href="#ref-BGP-MP" title="&quot;Multiprotocol Extensions for BGP-4&quot;">BGP-MP</a>] defines the format of two BGP
   attributes (MP_REACH_NLRI and MP_UNREACH_NLRI) that can be used to
   announce and withdraw the announcement of reachability information.
   This document defines how compliant systems should make use of those
   attributes for the purpose of conveying IPv6 routing information.

<span class="h2"><a class="selflink" id="section-1" href="#section-1">1</a>. Introduction</span>

   The BGP-4 protocol [<a href="#ref-BGP-4" title="&quot;A Border Gateway Protocol 4 (BGP-4)&quot;">BGP-4</a>] in particular, and path vector routing
   protocols in general, are mostly independent of the particular
   Address Family for which the protocol is being used.

   IPv6 falls under the generic category of protocols for which BGP-4 is
   suitable and, unless stated otherwise in this document, the BGP-4
   procedures to apply when using BGP-4 to carry IPv6 reachability
   information are those defined in [<a href="#ref-BGP-4" title="&quot;A Border Gateway Protocol 4 (BGP-4)&quot;">BGP-4</a>] and in subsequent documents
   that extend or update the BGP-4 specification.

   In terms of routing information, the most significant difference
   between IPv6 and IPv4 (for which BGP was originally designed) is the
   fact that IPv6 introduces scoped unicast addresses and defines
   particular situations when a particular address scope must be used.
   This document concerns itself essentially with the necessary rules to
   accommodate IPv6 address scope requirements.




<span class="grey">Marques &amp; Dupont            Standards Track                     [Page 1]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-2" ></span>
<span class="grey"><a href="./rfc2545">RFC 2545</a>      BGP-4 Multiprotocol Extensions for IPv6 IDR     March 1999</span>


<span class="h2"><a class="selflink" id="section-2" href="#section-2">2</a>. IPv6 Address Scopes</span>

   IPv6 defines 3 unicast address scopes [<a href="#ref-ADDR-ARCH" title="&quot;IP Version 6 Addressing Architecture&quot;">ADDR-ARCH</a>]: global, site-local
   and link-local. Site-local addresses are non-link-local address which
   are valid within the scope of a "site" and cannot be exported beyond
   it. As this document makes no assumption on the characteristics of a
   particular routing realm where BGP-4 is used, it makes no distinction
   between global and site-local addresses and refers to both as
   "global" or "non-link-local". Network administrators must however
   respect address scope restrictions and should be aware that the
   concepts of a BGP-4 routing domain and "site" are orthogonal notions
   and that they may or may not coincide in a given situation.

   Companion IPv6 specifications further define that only link-local
   address can be used when generating ICMP Redirect Messages [<a href="#ref-ND" title="&quot;Neighbor Discovery for IP Version 6 (IPv6)&quot;">ND</a>] and
   as next hop addresses in some routing protocols (eg. RIPng [<a href="#ref-RIP" title="&quot;RIPng for IPv6&quot;">RIP</a>]).

   This restrictions does imply that an IPv6 router must have a link-
   local next hop address for all directly connected routes (routes for
   which the given router and the next hop router share a common subnet
   prefix).

   Link-local addresses are not, however, well suited to be used as next
   hop attributes in BGP-4 given the rules defined for this attribute in
   the protocol specification [<a href="#ref-BGP-4" title="&quot;A Border Gateway Protocol 4 (BGP-4)&quot;">BGP-4</a>].

   For the above reasons, when BGP-4 is used to convey IPv6 reachability
   information it is sometimes necessary to announce a next hop
   attribute that consists of a global address and a link-local address.
   The following section describes the rules that should be followed
   when constructing the Network Address of Next Hop field of an
   MP_REACH_NLRI attribute.

<span class="h2"><a class="selflink" id="section-3" href="#section-3">3</a>. Constructing the Next Hop field</span>

   A BGP speaker shall advertise to its peer in the Network Address of
   Next Hop field the global IPv6 address of the next hop, potentially
   followed by the link-local IPv6 address of the next hop.

   The value of the Length of Next Hop Network Address field on a
   MP_REACH_NLRI attribute shall be set to 16, when only a global
   address is present, or 32 if a link-local address is also included in
   the Next Hop field.

   The link-local address shall be included in the Next Hop field if and
   only if the BGP speaker shares a common subnet with the entity
   identified by the global IPv6 address carried in the Network Address
   of Next Hop field and the peer the route is being advertised to.



<span class="grey">Marques &amp; Dupont            Standards Track                     [Page 2]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-3" ></span>
<span class="grey"><a href="./rfc2545">RFC 2545</a>      BGP-4 Multiprotocol Extensions for IPv6 IDR     March 1999</span>


   In all other cases a BGP speaker shall advertise to its peer in the
   Network Address field only the global IPv6 address of the next hop
   (the value of the Length of Network Address of Next Hop field shall
   be set to 16).

   As a consequence, a BGP speaker that advertises a route to an
   internal peer may modify the Network Address of Next Hop field by
   removing the link-local IPv6 address of the next hop.

<span class="h2"><a class="selflink" id="section-4" href="#section-4">4</a>. Transport</span>

   TCP connections, on top of which BGP-4 messages are exchanged, can be
   established either over IPv4 or IPv6. While BGP-4 itself is
   independent of the particular transport used it derives implicit
   configuration information from the address used to establish the
   peering session.  This information (the network address of a peer) is
   taken in account in the route dissemination procedure. Thus, when
   using TCP over IPv4 as a transport for IPv6 reachability information,
   additional explicit configuration of the peer's network address is
   required.

   Note that the information referred above is distinct from the BGP
   Identifier used in the BGP-4 tie breaking procedure. The BGP
   Identifier is a 32 bit unsigned integer exchanged between two peers
   at session establishment time, within an OPEN message. This is a
   system wide value determined at startup which must be unique in the
   network and should be derived from an IPv4 address regardless of the
   network protocol(s) a particular BGP-4 instance is configured to
   convey at a given moment.

   The use of TCP over IPv6 as transport protocol for IPv6 reachability
   information also has the advantage of providing explicit confirmation
   of IPv6 network reachability between two peers.

<span class="h2"><a class="selflink" id="section-5" href="#section-5">5</a>. Security Considerations</span>

   The extensions defined in this document allow BGP to propagate
   reachability information about IPv6 routes. As such, no new security
   issues are raised beyond those that already exist in BGP-4 and its
   use with IPv4.

<span class="h2"><a class="selflink" id="section-6" href="#section-6">6</a>. Acknowledgments</span>

   This document derives from the work on BGP-4 Multiprotocol Extensions
   by Tony Bates, Ravi Chandra, Dave Katz and Yakov Rekhter.






<span class="grey">Marques &amp; Dupont            Standards Track                     [Page 3]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-4" ></span>
<span class="grey"><a href="./rfc2545">RFC 2545</a>      BGP-4 Multiprotocol Extensions for IPv6 IDR     March 1999</span>


<span class="h2"><a class="selflink" id="section-7" href="#section-7">7</a>. References</span>

   [<a id="ref-ADDR-ARCH">ADDR-ARCH</a>] Hinden, R. and S. Deering, "IP Version 6 Addressing
               Architecture", <a href="./rfc2373">RFC 2373</a>, July 1998.

   [<a id="ref-BGP-4">BGP-4</a>]     Rekhter, Y. and T. Li, "A Border Gateway Protocol 4
               (BGP-4)", <a href="./rfc1771">RFC 1771</a>, March 1995.

   [<a id="ref-BGP-MP">BGP-MP</a>]    Bates, T., Chandra, R., Katz, D. and Y. Rekhter,
               "Multiprotocol Extensions for BGP-4", <a href="./rfc2283">RFC 2283</a>, February
               1998.

   [<a id="ref-IPv6">IPv6</a>]      Deering, S. and R. Hinden, "Internet Protocol, Version 6
               (IPv6) Specification", <a href="./rfc2460">RFC 2460</a>, December 1998.

   [<a id="ref-ND">ND</a>]        Narten, T., Nordmark, E. and W. Simpson, "Neighbor
               Discovery for IP Version 6 (IPv6)", <a href="./rfc2461">RFC 2461</a>, December
               1998.

   [<a id="ref-RIP">RIP</a>]       Malkin, G. and R. Minnear, "RIPng for IPv6",
               <a href="./rfc2080">RFC 2080</a>, January 1997.

<span class="h2"><a class="selflink" id="section-8" href="#section-8">8</a>. Author Information</span>

   Pedro R. Marques
   cisco Systems, Inc.
   170 W. Tasman Dr.
   San Jose, CA 95134
   USA

   Phone: +1 408 527-5202
   Fax:   +1 408 526-4952
   EMail: roque@cisco.com


   Francis Dupont
   GIE DYADE
   INRIA Rocquencourt
   Domaine de Voluceau
   BP 105
   78153 Le Chesnay CEDEX
   FRANCE

   Phone: +33 1 39 63 52 13
   Fax:   +33 1 39 63 58 66
   EMail: Francis.Dupont@inria.fr





<span class="grey">Marques &amp; Dupont            Standards Track                     [Page 4]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-5" ></span>
<span class="grey"><a href="./rfc2545">RFC 2545</a>      BGP-4 Multiprotocol Extensions for IPv6 IDR     March 1999</span>


<span class="h2"><a class="selflink" id="section-9" href="#section-9">9</a>.  Full Copyright Statement</span>

   Copyright (C) The Internet Society (1999).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
























Marques &amp; Dupont            Standards Track                     [Page 5]
</pre>
