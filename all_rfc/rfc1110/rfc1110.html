<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://dublincore.org/documents/2008/08/04/dc-html/">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="robots" content="index,follow" />
    <meta name="creator" content="rfcmarkup version 1.129b" />
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
      <meta name="DC.Identifier" content="urn:ietf:rfc:1110" />
      <meta name="DC.Relation.Replaces" content=""/><meta name="DC.Creator" content="A.M. McKenzie"><meta name="DC.Date.Issued" content="August, 1989"/>
       <meta name="DC.Title" content=" Problem with the TCP big window option "/>
       <title>RFC 1110:  Problem with the TCP big window option </title>    
        

        <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->    <script type="text/javascript"><!--
    function addHeaderTags() {
        var spans = document.getElementsByTagName("span");
        for (var i=0; i < spans.length; i++) {
            var elem = spans[i];
            if (elem) {
                var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";               
                }
            }
        }
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script><span class="pre noprint docinfo">[<a href="https://www.rfc-editor.org" title="RFC Editor">RFC Home</a>] [<a href=/rfc/rfc1110.txt>TEXT</a>|<a href=/rfc/pdfrfc/rfc1110.txt.pdf>PDF</a>|<a href=/rfc/rfc1110.html>HTML</a>] [<a href='https://datatracker.ietf.org/doc/rfc1110' title='IETF Datatracker information for this document'>Tracker</a>] [<a href="https://datatracker.ietf.org/ipr/search/?rfc=1110&submit=rfc" title="IPR disclosures related to this document">IPR</a>]                              </span><br/><span class="pre noprint docinfo">                                                                        </span><br /><span class="pre noprint docinfo">Obsoleted by: <a href="/rfc/rfc6247" target="_blank">6247</a>                                               UNKNOWN</span><br /><span class="pre noprint docinfo">                                                                        </span><pre>Network Working Group                                        A. McKenzie
Request for Comments: 1110                                       BBN STC
                                                             August 1989


                <span class="h1">A Problem with the TCP Big Window Option</span>

Status of this Memo

   This memo comments on the TCP Big Window option described in <a href="./rfc1106">RFC</a>
   <a href="./rfc1106">1106</a>.  Distribution of this memo is unlimited.

Abstract

   The TCP Big Window option discussed in <a href="./rfc1106">RFC 1106</a> will not work
   properly in an Internet environment which has both a high bandwidth *
   delay product and the possibility of disordering and duplicating
   packets.  In such networks, the window size must not be increased
   without a similar increase in the sequence number space.  Therefore,
   a different approach to big windows should be taken in the Internet.

Discussion

   TCP was designed to work in a packet store-and-forward environment
   characterized by the possibility of packet loss, packet disordering,
   and packet duplication.  Packet loss can occur, for example, by a
   congested network element discarding a packet.  Packet disordering
   can occur, for example, by packets of a TCP connection being
   arbitrarily transmitted partially over a low bandwidth terrestrial
   path and partially over a high bandwidth satellite path.  Packet
   duplication can occur, for example, when two directly-connected
   network elements use a reliable link protocol and the link goes down
   after the receiver correctly receives a packet but before the
   transmitter receives an acknowledgement for the packet; the
   transmitter and receiver now each take responsibility for attempting
   to deliver the same packet to its ultimate destination.

   TCP has the task of recreating at the destination an exact copy of
   the data stream generated at the source, in the same order and with
   no gaps or duplicates.  The mechanism used to accomplish this task is
   to assign a "unique" sequence number to each byte of data at its
   source, and to sort the bytes at the destination according to the
   sequence number.  The sorting operation corrects any disordering.  An
   acknowledgement, timeout, and retransmission scheme corrects for data
   loss.  The uniqueness of the sequence number corrects for data
   duplication.

   As a practical matter, however, the sequence number is not unique; it



<span class="grey">McKenzie                                                        [Page 1]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-2" ></span>
<span class="grey"><a href="./rfc1110">RFC 1110</a>           Comments on TCP Big Window Option         August 1989</span>


   is contained in a 32-bit field and therefore "wraps around" after the
   transmission of 2**32 bytes of data.  Two additional mechanisms are
   used to insure the effective uniqueness of sequence numbers; these
   are the TCP transmission window and bounds on packet lifetime within
   the Internet, including the IP Time-to-Live (TTL).  The transmission
   window specifies the maximum number of bytes which may be sent by the
   source in one source-destination roundtrip time.  Since the TCP
   transmission window is specified by 16 bits, which is 1/65536 of the
   sequence number space, a sequence number will not be reused (used to
   number another byte) for 65,536 roundtrip times.  So long as the
   combination of gateway action on the IP TTL and holding times within
   the individual networks which interconnect the gateways do not allow
   a packet's lifetime to exceed 65,536 roundtrip times, each sequence
   number is effectively unique.  It was believed by the TCP designers
   that the networks and gateways forming the internet would meet this
   constraint, and such has been the case.

   The proposed TCP Big Window option, as described in <a href="./rfc1106">RFC 1106</a>, expands
   the size of the window specification to 30 bits, while leaving the
   sequence number space unchanged.  Thus, a sequence number can be
   reused after 4 roundtrip times.  Further, the Nak option allows a
   packet to be retransmitted (i.e., potentially duplicated) by the
   source after only one roundtrip time.  Thus, if a packet becomes
   "lost" in the Internet for only about 5 roundtrip times it may be
   delivered when its sequence number again lies within the window,
   albeit a later cycle of the window.  In this case, TCP will not
   necessarily recreate at the destination an exact copy of the data
   stream generated at the source; it may replace some data with earlier
   data.

   Of course, the problem described above results from the storage of
   the "lost" packet within the net, and its subsequent out-of-order
   delivery.  <a href="./rfc1106">RFC 1106</a> seems to describe use of the proposed options in
   an isolated satellite network.  We may hypothesize that this network
   is memoryless, and thus cannot deliver packets out of order; it
   either delivers a packet in order or loses it.  If this is the case,
   then there is no problem with the proposed options.  The Internet,
   however, can deliver packets out of order, and this will likely
   continue to be true even if gigabit links become part of the
   Internet.  Therefore, the approach described in <a href="./rfc1106">RFC 1106</a> cannot be
   adopted for general Internet use.










<span class="grey">McKenzie                                                        [Page 2]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-3" ></span>
<span class="grey"><a href="./rfc1110">RFC 1110</a>           Comments on TCP Big Window Option         August 1989</span>


Author's Address

   Alex McKenzie
   Bolt Beranek and Newman Inc.
   10 Moulton Street
   Cambridge, MA 02238

   Phone: (617) 873-2962

   EMail: MCKENZIE@BBN.COM









































McKenzie                                                        [Page 3]
</pre>
