<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://dublincore.org/documents/2008/08/04/dc-html/">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="robots" content="index,follow" />
    <meta name="creator" content="rfcmarkup version 1.129b" />
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
      <meta name="DC.Identifier" content="urn:ietf:rfc:2918" />
      <meta name="DC.Relation.Replaces" content=""/><meta name="DC.Creator" content="E. Chen"><meta name="DC.Date.Issued" content="September, 2000"/>
       <meta name="DC.Title" content=" Route Refresh Capability for BGP-4 "/>
       <title>RFC 2918:  Route Refresh Capability for BGP-4 </title>    
        

        <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->    <script type="text/javascript"><!--
    function addHeaderTags() {
        var spans = document.getElementsByTagName("span");
        for (var i=0; i < spans.length; i++) {
            var elem = spans[i];
            if (elem) {
                var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";               
                }
            }
        }
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script><span class="pre noprint docinfo">[<a href="https://www.rfc-editor.org" title="RFC Editor">RFC Home</a>] [<a href=/rfc/rfc2918.txt>TEXT</a>|<a href=/rfc/pdfrfc/rfc2918.txt.pdf>PDF</a>|<a href=/rfc/rfc2918.html>HTML</a>] [<a href='https://datatracker.ietf.org/doc/rfc2918' title='IETF Datatracker information for this document'>Tracker</a>] [<a href="https://datatracker.ietf.org/ipr/search/?rfc=2918&submit=rfc" title="IPR disclosures related to this document">IPR</a>]                              </span><br/><span class="pre noprint docinfo">                                                                        </span><br /><span class="pre noprint docinfo">                                                       PROPOSED STANDARD</span><br /><span class="pre noprint docinfo">Updated by: <a href="/rfc/rfc7313" target="_blank">7313</a>                                                        </span><pre>Network Working Group                                            E. Chen
Request for Comments: 2918                              Redback Networks
Category: Standards Track                                 September 2000


                   <span class="h1">Route Refresh Capability for BGP-4</span>

Status of this Memo

   This document specifies an Internet standards track protocol for the
   Internet community, and requests discussion and suggestions for
   improvements.  Please refer to the current edition of the "Internet
   Official Protocol Standards" (STD 1) for the standardization state
   and status of this protocol.  Distribution of this memo is unlimited.

Copyright Notice

   Copyright (C) The Internet Society (2000).  All Rights Reserved.

Abstract

   This document defines a new Border Gateway Protocol (BGP) capability
   termed 'Route Refresh Capability', which would allow the dynamic
   exchange of route refresh request between BGP speakers and subsequent
   re-advertisement of the respective Adj-RIB-Out.  One possible
   application of this capability is to facilitate non-disruptive
   routing policy changes.

<span class="h2"><a class="selflink" id="section-1" href="#section-1">1</a>. Introduction</span>

   Currently there does not exist a mechanism in BGP-4 [<a href="#ref-BGP-4" title="&quot;A Border Gateway Protocol 4 (BGP- 4)&quot;">BGP-4</a>] to
   dynamically request a re-advertisement of the Adj-RIB-Out from a BGP
   peer.  When the inbound routing policy for a peer changes, all
   prefixes from that peer must be somehow made available and then re-
   examined against the new policy. To accomplish this, a commonly used
   approach, known as 'soft-reconfiguration', is to store an unmodified
   copy of all routes from that peer at all times, even though routing
   policies do not change frequently (typically no more than a couple
   times a day). Additional memory and CPU are required to maintain
   these routes.

   This document proposes an alternative solution that avoids the
   additional maintenance cost. More specifically, it defines a new BGP
   capability termed 'Route Refresh Capability', which would allow the
   dynamic exchange of route refresh request between BGP speakers and
   subsequent re-advertisement of the respective Adj-RIB-Out.





<span class="grey">Chen                        Standards Track                     [Page 1]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-2" ></span>
<span class="grey"><a href="./rfc2918">RFC 2918</a>                Route Refresh for BGP-4           September 2000</span>


<span class="h2"><a class="selflink" id="section-2" href="#section-2">2</a>. Route Refresh Capability</span>

   To advertise the Route Refresh Capability to a peer, a BGP speaker
   uses BGP Capabilities Advertisement [<a href="#ref-BGP-CAP" title="&quot;Capabilities Advertisement with BGP-4&quot;">BGP-CAP</a>]. This capability is
   advertised using the Capability code 2 and Capability length 0.

   By advertising the Route Refresh Capability to a peer, a BGP speaker
   conveys to the peer that the speaker is capable of receiving and
   properly handling the ROUTE-REFRESH message (as defined in <a href="#section-3">Section 3</a>)
   from the peer.

<span class="h2"><a class="selflink" id="section-3" href="#section-3">3</a>. Route-REFRESH Message</span>

   The ROUTE-REFRESH message is a new BGP message type defined as
   follows:

          Type: 5 - ROUTE-REFRESH

          Message Format: One &lt;AFI, SAFI&gt; encoded as

                  0       7      15      23      31
                  +-------+-------+-------+-------+
                  |      AFI      | Res.  | SAFI  |
                  +-------+-------+-------+-------+

          The meaning, use and encoding of this &lt;AFI, SAFI&gt; field is the
          same as defined in [BGP-MP, sect. 7]. More specifically,

               AFI  - Address Family Identifier (16 bit).

               Res. - Reserved (8 bit) field. Should be set to 0 by the
                      sender and ignored by the receiver.

               SAFI - Subsequent Address Family Identifier (8 bit).

<span class="h2"><a class="selflink" id="section-4" href="#section-4">4</a>. Operation</span>

   A BGP speaker that is willing to receive the ROUTE-REFRESH message
   from its peer should advertise the Route Refresh Capability to the
   peer using BGP Capabilities advertisement [<a href="#ref-BGP-CAP" title="&quot;Capabilities Advertisement with BGP-4&quot;">BGP-CAP</a>].

   A BGP speaker may send a ROUTE-REFRESH message to its peer only if it
   has received the Route Refresh Capability from its peer.  The &lt;AFI,
   SAFI&gt; carried in such a message should be one of the &lt;AFI, SAFI&gt; that
   the peer has advertised to the speaker at the session establishment
   time via capability advertisement.





<span class="grey">Chen                        Standards Track                     [Page 2]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-3" ></span>
<span class="grey"><a href="./rfc2918">RFC 2918</a>                Route Refresh for BGP-4           September 2000</span>


   If a BGP speaker receives from its peer a ROUTE-REFRESH message with
   the &lt;AFI, SAFI&gt; that the speaker didn't advertise to the peer at the
   session establishment time via capability advertisement, the speaker
   shall ignore such a message.  Otherwise, the BGP speaker shall re-
   advertise to that peer the Adj-RIB-Out of the &lt;AFI, SAFI&gt; carried in
   the message, based on its outbound route filtering policy.

<span class="h2"><a class="selflink" id="section-5" href="#section-5">5</a>. Security Considerations</span>

   This extension to BGP does not change the underlying security issues.

<span class="h2"><a class="selflink" id="section-6" href="#section-6">6</a>. Acknowledgments</span>

   The concept of Route Refresh proposed is similar to the one used in
   IDRP.

   The author would like to thank Yakov Rekhter, Ravi Chandra, Srihari
   Ramachandra and Bruce Cole for their review and comments.

<span class="h2"><a class="selflink" id="section-7" href="#section-7">7</a>. References</span>

   [<a id="ref-BGP-4">BGP-4</a>]   Rekhter, Y. and T. Li, "A Border Gateway Protocol 4 (BGP-
             4)", <a href="./rfc1771">RFC 1771</a>, March 1995.

   [<a id="ref-BGP-MP">BGP-MP</a>]  Bates, T., Chandra, R., Katz, D. and Y. Rekhter,
             "Multiprotocol Extensions for BGP-4", <a href="./rfc2858">RFC 2858</a>, June 2000.

   [<a id="ref-BGP-CAP">BGP-CAP</a>] Chandra, R. and J. Scudder, "Capabilities Advertisement
             with BGP-4", <a href="./rfc2842">RFC 2842</a>, May 2000.

<span class="h2"><a class="selflink" id="section-8" href="#section-8">8</a>. Author's Address</span>

   Enke Chen
   Redback Networks Inc.
   350 Holger Way
   San Jose, CA 95134

   EMail: enke@redback.com













<span class="grey">Chen                        Standards Track                     [Page 3]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-4" ></span>
<span class="grey"><a href="./rfc2918">RFC 2918</a>                Route Refresh for BGP-4           September 2000</span>


<span class="h2"><a class="selflink" id="section-9" href="#section-9">9</a>.  Full Copyright Statement</span>

   Copyright (C) The Internet Society (2000).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.



















Chen                        Standards Track                     [Page 4]
</pre>
