<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://dublincore.org/documents/2008/08/04/dc-html/">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="robots" content="index,follow" />
    <meta name="creator" content="rfcmarkup version 1.129b" />
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
      <meta name="DC.Identifier" content="urn:ietf:rfc:394" />
      <meta name="DC.Relation.Replaces" content=""/><meta name="DC.Creator" content="J.M. McQuillan"><meta name="DC.Date.Issued" content="September, 1972"/>
       <meta name="DC.Title" content=" Two Proposed Changes to the IMP-Host Protocol "/>
       <title>RFC 394:  Two Proposed Changes to the IMP-Host Protocol </title>    
        

        <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->    <script type="text/javascript"><!--
    function addHeaderTags() {
        var spans = document.getElementsByTagName("span");
        for (var i=0; i < spans.length; i++) {
            var elem = spans[i];
            if (elem) {
                var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";               
                }
            }
        }
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script><span class="pre noprint docinfo">[<a href="https://www.rfc-editor.org" title="RFC Editor">RFC Home</a>] [<a href=/rfc/rfc394.txt>TEXT</a>|<a href=/rfc/pdfrfc/rfc394.txt.pdf>PDF</a>|<a href=/rfc/rfc394.html>HTML</a>] [<a href='https://datatracker.ietf.org/doc/rfc394' title='IETF Datatracker information for this document'>Tracker</a>] [<a href="https://datatracker.ietf.org/ipr/search/?rfc=394&submit=rfc" title="IPR disclosures related to this document">IPR</a>]                              </span><br/><span class="pre noprint docinfo">                                                                        </span><br /><span class="pre noprint docinfo">                                                                 UNKNOWN</span><br /><span class="pre noprint docinfo">                                                                        </span><pre>Network Working Group                    John M. McQuillan
Request for Comments #394                Bolt Beranek and Newman Inc.
NIC 11856                                27 September 1972
Categories:  B.1
Updates:  RFC #381
Obsoletes:

             <span class="h1">TWO PROPOSED CHANGES TO THE IMP-HOST PROTOCOL</span>
---------------------------------------------
     This note describes two changes to the IMP-Host communication
protocol described in BBN Report 1822 and revised in <a href="./rfc381">RFC 381</a>.  The
first deals with the IMP-to-Host interface and the 30-second timeout
mechanism on each IMP transmission to the Host.  The second deals with
the Host-to-IMP interface and proposes a new timeout mechanism.  These
changes are independent; in statement and in implementation.  We
invite comments on each proposal.  If no adverse comments are
received, they will be installed in the network on Tuesday, October 10
(if serious adverse comments are received, action will be delayed
until early November).

1)  Declaring an unresponsive Host as dead to the network
    -----------------------------------------------------
     Currently, a Host is given 30 seconds to accept each packet of a
regular message and is also given 30 seconds to accept non- regular
messages.  If the Host is unresponsive for this period of time, the
IMP takes the following actions:

     a)  All messages held for the Host are discarded.

     b)  The source Host for each discarded messages is sent
         a type 9, subtype 0 message (Incomplete Transmission -
         Destination Host Tardy).

     c)  The IMP ready line is dropped and raised again.

     d)  The Host is sent 3 type 4 messages (NOP).

     e)  The Host is sent a type 10 message (IMP-Host Interface
         Reset).

     We propose that in addition the IMP declare the Host dead to the
network.  Upon receipt of the next bit from the Host, the IMP will
declare the Host alive and begin the 30-second delay while the
information that the Host is now alive is propagated throughout the
network.






<span class="grey">                                                                [Page 1]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-2" ></span>
<span class="grey">RFC #394                                            John M. McQuillan</span>

     This change is an attempt to alleviate some problems that are
caused by Hosts whose ready lines are up when they are not able to
accept bits from the IMP. Several Hosts fall into this category.
There are some Hosts whose ready lines are wired to be on all the
time.  It is annoying, in terminal use and in running survey programs,
to have to wait for 30 seconds to find out that a Host is not
responding.  Other Hosts sometimes go into "break- point mode" for
system debugging for several minutes at a time.  The NCP software is
not running, and messages accumulate in the network and are thrown
away.  It seems preferable to declare such Hosts to be dead until they
send a message* to the IMP, and then any source Host attempting to
communicate can be notified at once that the destination Host is dead.

2) Timing out Host-to-IMP messages in 15 seconds
   ---------------------------------------------

     When the IMP receives a message from a Host, it must acquire
several internal resources in order to process the message.  It must
assign it a message number, make an entry in an internal table, and so
on.  If any of these IMP resources is not available, the IMP simply
waits until it does become available.  It cannot take any more
messages from the Host, and so the interface is stopped.  This
condition is usually momentary, but under unusual circumstances the
IMP may not be able to process a message it has begun to accept for
many seconds.  This situation creates an especially difficult problem
for Hosts with half-duplex interfaces.  If the IMP takes 30 seconds to
process a message, then the IMP-to- Host timeout outlined in 1) takes
effect, and the Host loses all messages sent to it in the last 30
seconds.  (It should be noted that the half-duplex interface may be
the cause of a deadly embrace, e.g. the reason that the IMP cannot
acquire the necessary resources to process a given message may be that
the Host in question has several messages on its queue and they are
tying up storage, message





__________________
*Thus a Host should send its IMP at least two NOPs (or other
 messages) whenever it receives a type 10 message from its IMP.








<span class="grey">                                                                [Page 2]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-3" ></span>
<span class="grey">RFC #394                                           John M. Mcquillan</span>

numbers, or table slots.  The Host must accept these messages before
any more messages can be introduced into the network.)  Even for Hosts
with full-duplex interfaces, occurrences of this situation might
interfere with other useful communication.

     We propose to notify the Host when the IMP cannot continue to
process a message that it has begun to accept.  The IMP will try to
process the message for 15 seconds, and then will send the Host a type
9, subtype 4 message (bits 30,31,32 = 100) which will be defined as
Incomplete Transmission - Resources Unavailable.  In such a case, the
IMP has not been able to send any part of the message into the
network.  The IMP will take in the remainder of the message; at that
point a Host with a half-duplex interface should begin to accept
messages from the IMP, while a Host with a full-duplex interface might
attempt to transmit some other message.  The Host may attempt to
retransmit the incomplete message if that is desirable.












       [ This RFC was put into machine readable form for entry ]
       [ into the online RFC archives by BBN Corp. under the   ]
       [ direction of Alex McKenzie.                      1/97 ]


















                                                                [Page 3]
</pre>
