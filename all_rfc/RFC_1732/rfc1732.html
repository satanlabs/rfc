<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://dublincore.org/documents/2008/08/04/dc-html/">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="robots" content="index,follow" />
    <meta name="creator" content="rfcmarkup version 1.129b" />
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
      <meta name="DC.Identifier" content="urn:ietf:rfc:1732" />
      <meta name="DC.Relation.Replaces" content=""/><meta name="DC.Creator" content="M. Crispin"><meta name="DC.Date.Issued" content="December, 1994"/>
       <meta name="DC.Title" content=" IMAP4 Compatibility with IMAP2 and IMAP2bis "/>
       <title>RFC 1732:  IMAP4 Compatibility with IMAP2 and IMAP2bis </title>    
        

        <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->    <script type="text/javascript"><!--
    function addHeaderTags() {
        var spans = document.getElementsByTagName("span");
        for (var i=0; i < spans.length; i++) {
            var elem = spans[i];
            if (elem) {
                var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";               
                }
            }
        }
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script><span class="pre noprint docinfo">[<a href="https://www.rfc-editor.org" title="RFC Editor">RFC Home</a>] [<a href=/rfc/rfc1732.txt>TEXT</a>|<a href=/rfc/pdfrfc/rfc1732.txt.pdf>PDF</a>|<a href=/rfc/rfc1732.html>HTML</a>] [<a href='https://datatracker.ietf.org/doc/rfc1732' title='IETF Datatracker information for this document'>Tracker</a>] [<a href="https://datatracker.ietf.org/ipr/search/?rfc=1732&submit=rfc" title="IPR disclosures related to this document">IPR</a>]                              </span><br/><span class="pre noprint docinfo">                                                                        </span><br /><span class="pre noprint docinfo">                                                           INFORMATIONAL</span><br /><span class="pre noprint docinfo">                                                                        </span><pre>Network Working Group                                         M. Crispin
Request for Comments: 1732                      University of Washington
Category: Informational                                    December 1994


              <span class="h1">IMAP4 COMPATIBILITY WITH IMAP2 AND IMAP2BIS</span>


Status of this Memo

   This memo provides information for the Internet community.  This memo
   does not specify an Internet standard of any kind.  Distribution of
   this memo is unlimited.

Introduction

   This is a summary of hints and recommendations to enable an IMAP4
   implementation to interoperate with implementations that conform to
   earlier specifications.  None of these hints and recommendations are
   required by the IMAP4 specification; implementors must decide for
   themselves whether they want their implementation to fail if it
   encounters old software.

   IMAP4 has been designed to be upwards compatible with earlier
   specifications.  For the most part, IMAP4 facilities that were not in
   earlier specifications should be invisible to clients unless the
   client asks for the facility.

   In some cases, older servers may support some of the capabilities
   listed as being "new in IMAP4" as experimental extensions to the
   IMAP2 protocol described in <a href="./rfc1176">RFC 1176</a>.

   This information may not be complete; it reflects current knowledge
   of server and client implementations as well as "folklore" acquired
   in the evolution of the protocol.
















<span class="grey">Crispin                                                         [Page 1]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-2" ></span>
<span class="grey"><a href="./rfc1732">RFC 1732</a>                 IMAP4 - Compatibility             December 1994</span>


IMAP4 client interoperability with old servers

   In general, a client should be able to discover whether an IMAP2
   server supports a facility by trial-and-error; if an attempt to use a
   facility generates a BAD response, the client can assume that the
   server does not support the facility.

   A quick way to check whether a server implementation supports the
   IMAP4 specification is to try the CAPABILITY command.  An OK response
   that includes the IMAP4 capability value indicates a server that
   supports IMAP4; a BAD response or one without the IMAP4 capability
   value indicates an older server.

   The following is a list of facilities that are only in IMAP4, and
   suggestions for how new clients might interoperate with old servers:

   CAPABILITY command
            A BAD response to this command indicates that the server
            implements IMAP2 (or IMAP2bis) and not IMAP4.

   AUTHENTICATE command.
            Use the LOGIN command.

   LSUB and LIST commands
            Try the <a href="./rfc1176">RFC 1176</a> FIND command.

   * in a sequence
            Use the number of messages in the mailbox from the EXISTS
            unsolicited response.

   SEARCH extensions (character set, additional criteria)
            Reformulate the search request using only the searching
            options listed in search_old in the IMAP4 grammar.  This may
            entail doing multiple searches to achieve the desired
            results.

   BODYSTRUCTURE fetch data item
            Try to fetch the non-extensible BODY data item.

   body section number 0
            Fetch the entire message and extract the header.

   <a href="./rfc822">RFC822</a>.HEADER.LINES and <a href="./rfc822">RFC822</a>.HEADER.LINES.NOT fetch data items
            Use <a href="./rfc822">RFC822</a>.HEADER and remove the unwanted information.

   BODY.PEEK[section], <a href="./rfc822">RFC822</a>.PEEK, and <a href="./rfc822">RFC822</a>.TEXT.PEEK fetch data
            items Use the corresponding non-PEEK versions and manually
            clear the \Seen flag as necessary.



<span class="grey">Crispin                                                         [Page 2]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-3" ></span>
<span class="grey"><a href="./rfc1732">RFC 1732</a>                 IMAP4 - Compatibility             December 1994</span>


   UID fetch data item and the UID commands
            No equivalent capabilitity exists in older servers.

   FLAGS.SILENT, +FLAGS.SILENT, and -FLAGS.SILENT store data items
            Use the corresponding non-SILENT versions and ignore the
            untagged FETCH responses which com eback.


   The following IMAP4 facilities were introduced in the experimental
   IMAP2bis revisions to <a href="./rfc1176">RFC-1176</a>, and may be present in a server that
   does not support the CAPABILITY command:

   CREATE, DELETE, and RENAME commands
            To test whether these commands are present, try a CREATE
            INBOX command.  If the response is NO, these commands are
            supported by the server.  If the response is BAD, they are
            not.  Older servers without the CREATE capability may sup-
            port implicit creation of a mailbox by a COPY command with a
            non-existant name as the destination.

   APPEND command
            To test whether this command is present, try to append a
            zero-length stream to a mailbox name that is known not to
            exist (or at least, highly unlikely to exist) on the remote
            system.

   SUBSCRIBE and UNSUBSCRIBE commands
            Try the form of these commands with the optional MAILBOX
            keyword.

   EXAMINE command
            Use the SELECT command instead.

   flags and internal date argument to APPEND command
            Try the APPEND without any flag list and internal date argu-
            ments.

   BODY, BODY[section], and FULL fetch data items
            Use <a href="./rfc822">RFC822</a>.TEXT and ALL instead.  Server does not support
            MIME.

   PARTIAL command
            Use the appropriate FETCH command and ignore the unwanted
            data.


   IMAP4 client implementations must accept all responses and data for-
   mats documented in the IMAP4 specification, including those labeled



<span class="grey">Crispin                                                         [Page 3]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-4" ></span>
<span class="grey"><a href="./rfc1732">RFC 1732</a>                 IMAP4 - Compatibility             December 1994</span>


   as obsolete.  This includes the COPY and STORE unsolicited responses
   and the old format of dates and times.  In particular, client imple-
   mentations must not treat a date/time as a fixed format string; nor
   may they assume that the time begins at a particular octet.

   IMAP4 client implementations must not depend upon the presence of any
   server extensions that are not in the base IMAP4 specification.

   The experimental IMAP2bis version specified that the TRYCREATE spe-
   cial information token is sent as a separate unsolicited OK response
   instead of inside the NO response.

   The FIND BBOARDS, FIND ALL.BBOARDS, and BBOARD commands of <a href="./rfc1176">RFC 1176</a>
   are removed from IMAP4.  There is no equivalent to the bboard com-
   mands, which provided a separate namespace with implicit restrictions
   on what may be done in that namespace.

   Older server implementations may automatically create the destination
   mailbox on COPY if that mailbox does not already exist.  This was how
   a new mailbox was created in older specifications.  If the server
   does not support the CREATE command (see above for how to test for
   this), it will probably create a mailbox on COPY.

   Older server implementations may not preserve flags or internal dates
   on COPY.  Some server implementations may not permit the preservation
   of certain flags on COPY or their setting with APPEND as site policy.

























<span class="grey">Crispin                                                         [Page 4]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-5" ></span>
<span class="grey"><a href="./rfc1732">RFC 1732</a>                 IMAP4 - Compatibility             December 1994</span>


IMAP4 server interoperability with old clients

   In general, there should be no interoperation problem between a
   server conforming to the IMAP4 specification and a well-written
   client that conforms to an earlier specification.  Known problems are
   noted below:

      Poor wording in the description of the CHECK command in earlier
      specifications implied that a CHECK command is the way to get the
      current number of messages in the mailbox.  This is incorrect.  A
      CHECK command does not necessarily result in an EXISTS response.
      Clients must remember the most recent EXISTS value sent from the
      server, and should not generate unnecessary CHECK commands.

      An incompatibility exists with COPY in IMAP4.  COPY in IMAP4
      servers does not automatically create the destination mailbox if
      that mailbox does not already exist.  This may cause problems with
      old clients that expect automatic mailbox creation in COPY.

      The PREAUTH unsolicited response is new in IMAP4.  It is highly
      unlikely that an old client would ever see this response.

      The format of dates and times has changed due to the impending end
      of the century.  Clients that fail to accept a four-digit year or
      a signed four-digit timezone value will not work properly with
      IMAP4.

      An incompatibility exists with the use of "\" in quoted strings.
      This is best avoided by using literals instead of quoted strings
      if "\" or &lt;"&gt; is embedded in the string.

Security Considerations

   Security issues are not discussed in this memo.

Author's Address:

   Mark R. Crispin
   Networks and Distributed Computing, JE-30
   University of Washington
   Seattle, WA  98195

   Phone: (206) 543-5762

   EMail: MRC@CAC.Washington.EDU






Crispin                                                         [Page 5]
</pre>
