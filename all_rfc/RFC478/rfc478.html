<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://dublincore.org/documents/2008/08/04/dc-html/">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="robots" content="index,follow" />
    <meta name="creator" content="rfcmarkup version 1.129b" />
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
      <meta name="DC.Identifier" content="urn:ietf:rfc:478" />
      <meta name="DC.Relation.Replaces" content=""/><meta name="DC.Creator" content="R.D. Bressler"><meta name="DC.Creator" content="R. Thomas"><meta name="DC.Date.Issued" content="March, 1973"/>
       <meta name="DC.Title" content=" FTP server-server interaction - II "/>
       <title>RFC 478:  FTP server-server interaction - II </title>    
        

        <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->    <script type="text/javascript"><!--
    function addHeaderTags() {
        var spans = document.getElementsByTagName("span");
        for (var i=0; i < spans.length; i++) {
            var elem = spans[i];
            if (elem) {
                var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";               
                }
            }
        }
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script><span class="pre noprint docinfo">[<a href="https://www.rfc-editor.org" title="RFC Editor">RFC Home</a>] [<a href=/rfc/rfc478.txt>TEXT</a>|<a href=/rfc/pdfrfc/rfc478.txt.pdf>PDF</a>|<a href=/rfc/rfc478.html>HTML</a>] [<a href='https://datatracker.ietf.org/doc/rfc478' title='IETF Datatracker information for this document'>Tracker</a>] [<a href="https://datatracker.ietf.org/ipr/search/?rfc=478&submit=rfc" title="IPR disclosures related to this document">IPR</a>]                              </span><br/><span class="pre noprint docinfo">                                                                        </span><br /><span class="pre noprint docinfo">                                                                 UNKNOWN</span><br /><span class="pre noprint docinfo">                                                                        </span><pre>Network Working Group                                        B. Bressler
Request for Comments: 478                                      B. Thomas
NIC: 14947                                                           BBN
                                                           26 March 1973

                    <span class="h1">FTP Server-Server Interaction-II</span>

   At the recent FTP meeting at BBN in Cambridge, one of the topics
   discussed was that of server-server interaction.  In a typical
   situation a user (A) conversing with two servers (B,C) is interested
   in retrieving a file from one site (B) and sending it to the other
   (C).


                          +------+
                          | USER |
                          |   A  |
                         /+------+\
                   control        control
                      /              \
                +------+            +------+
                |SERVER|    DATA    |SERVER|
                |   B  |-----------&gt;|  C   |
                +------+            +------+

   The consensus of the meeting was that mechanisms were necessary to
   make B and C aware of each other and to allow a data connection to be
   established without forcing each other to queue RFCs for local
   sockets before they exist.

   The proposed solution to this problem was a command called PASSIVE
   (PASV?).  The following is our conclusion as to the meaning of the
   command and how it would be used.

   Third party connections would be established using the SOCK command,
   which says "Be prepared to use socket S at Host H to establish your
   data connection", and the PASV command which says "open your data
   socket for listening, and upon receipt of a transfer command wait for
   an RFC rather than initiating one."

   A positive acknowledgement to the PASV command indicates that the
   data socket has been opened for listening.  When an RFC for its data
   socket arrives after it has positively acknowledged a PASV command,
   the server should respond with a matching RFC to open the data
   connection (assuming, of course, that the incoming RFC is consistent
   with the previous SOCK commands, if any).





<span class="grey">Bressler                                                        [Page 1]</span></pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><span id="page-2" ></span>
<span class="grey"><a href="./rfc478">RFC 478</a>             FTP Server-Server Interaction-II       26 March 1973</span>


                            +---------------+
                            |               |
                 +----------| USER PROCESS  |----------+
                 |          |       A       |          |
               telnet       +---------------+        telnet
                 |                                     |
                 |                                     |
          +-----------+                         +-------------+
          |           |--------&gt;      ---------&gt;|             |
          |  SERVER   |data sockets  data socket|   SERVER    |
          |     B     |    Sb           Sc      |     C       |
          |           |&lt;--------      &lt;---------|             |
          +-----------+                         +-------------+


   USER A TO SERVER B                     USER A TO SERVER C
   __________________                     __________________

   A-&gt;B   SOCK  HOST-C  SKT- Sc           A-&gt;C   SOCK  HOST-B  SKT-  Sb

   B-&gt;A       ACK                         C-&gt;A      ACK

   A-&gt;B   PASV

   B-&gt;A       ACK

   A-&gt;B   STOR                            A-&gt;C   RTRV

      1. After the PASV command has been acknowledged, the two data
         transfer commands can be sent in either order, since the
         LISTENING action takes place with the PASV command

      2. The user knows the socket numbers Sc and Sb to be the data
         sockets as specified by the protocol.

      3. Note that it is not essential for a SOCK command to be sent to
         the same Host to whom a PASV will be sent.  Sending one to him
         provides security in that the incoming RFC can be checked.

   RB/nlg




          [This RFC was put into machine readable form for entry]
     [into the online RFC archives by Helene Morin, Via Genie 12/1999]





Bressler                                                        [Page 2]
</pre>
