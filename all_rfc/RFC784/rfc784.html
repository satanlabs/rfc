<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head profile="http://dublincore.org/documents/2008/08/04/dc-html/">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="robots" content="index,follow" />
    <meta name="creator" content="rfcmarkup version 1.129b" />
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/" />
      <meta name="DC.Identifier" content="urn:ietf:rfc:784" />
      <meta name="DC.Relation.Replaces" content=""/><meta name="DC.Creator" content="S. Sluizer"><meta name="DC.Creator" content="J. Postel"><meta name="DC.Date.Issued" content="July, 1981"/>
       <meta name="DC.Title" content=" Mail Transfer Protocol: ISI TOPS20 implementation "/>
       <title>RFC 784:  Mail Transfer Protocol: ISI TOPS20 implementation </title>    
        

        <style type="text/css">
	@media only screen 
	  and (min-width: 992px)
	  and (max-width: 1199px) {
	    body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 768px)
	  and (max-width: 991px) {
            body { font-size: 14pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-width: 480px)
	  and (max-width: 767px) {
            body { font-size: 11pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (max-width: 479px) {
            body { font-size: 8pt; }
            div.content { width: 96ex; margin: 0 auto; }
        }
	@media only screen 
	  and (min-device-width : 375px) 
	  and (max-device-width : 667px) {
            body { font-size: 9.5pt; }
            div.content { width: 96ex; margin: 0; }
        }
	@media only screen 
	  and (min-device-width: 1200px) {
            body { font-size: 10pt; margin: 0 4em; }
            div.content { width: 96ex; margin: 0; }
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
	    font-weight: bold;
            line-height: 0pt;
            display: inline;
            white-space: pre;
            font-family: monospace;
            font-size: 1em;
	    font-weight: bold;
        }
        pre {
            font-size: 1em;
            margin-top: 0px;
            margin-bottom: 0px;
        }
	.pre {
	    white-space: pre;
	    font-family: monospace;
	}
	.header{
	    font-weight: bold;
	}
        .newpage {
            page-break-before: always;
        }
        .invisible {
            text-decoration: none;
            color: white;
        }
        a.selflink {
          color: black;
          text-decoration: none;
        }
        @media print {
            body {
                font-family: monospace;
                font-size: 10.5pt;
            }
            h1, h2, h3, h4, h5, h6 {
                font-size: 1em;
            }
        
            a:link, a:visited {
                color: inherit;
                text-decoration: none;
            }
            .noprint {
                display: none;
            }
        }
	@media screen {
	    .grey, .grey a:link, .grey a:visited {
		color: #777;
	    }
            .docinfo {
                background-color: #EEE;
            }
            .top {
                border-top: 7px solid #EEE;
            }
            .bgwhite  { background-color: white; }
            .bgred    { background-color: #F44; }
            .bggrey   { background-color: #666; }
            .bgbrown  { background-color: #840; }            
            .bgorange { background-color: #FA0; }
            .bgyellow { background-color: #EE0; }
            .bgmagenta{ background-color: #F4F; }
            .bgblue   { background-color: #66F; }
            .bgcyan   { background-color: #4DD; }
            .bggreen  { background-color: #4F4; }

            .legend   { font-size: 90%; }
            .cplate   { font-size: 70%; border: solid grey 1px; }
	}
    </style>
    <!--[if IE]>
    <style>
    body {
       font-size: 13px;
       margin: 10px 10px;
    }
    </style>
    <![endif]-->    <script type="text/javascript"><!--
    function addHeaderTags() {
        var spans = document.getElementsByTagName("span");
        for (var i=0; i < spans.length; i++) {
            var elem = spans[i];
            if (elem) {
                var level = elem.getAttribute("class");
                if (level == "h1" || level == "h2" || level == "h3" || level == "h4" || level == "h5" || level == "h6") {
                    elem.innerHTML = "<"+level+">"+elem.innerHTML+"</"+level+">";               
                }
            }
        }
    }
    var legend_html = "Colour legend:<br />      <table>         <tr><td>Unknown:</td>                   <td><span class='cplate bgwhite'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft:</td>                     <td><span class='cplate bgred'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Informational:</td>             <td><span class='cplate bgorange'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Experimental:</td>              <td><span class='cplate bgyellow'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Best Common Practice:</td>      <td><span class='cplate bgmagenta'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Proposed Standard:</td>         <td><span class='cplate bgblue'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Draft Standard (old designation):</td> <td><span class='cplate bgcyan'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Internet Standard:</td>         <td><span class='cplate bggreen'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Historic:</td>                  <td><span class='cplate bggrey'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>         <tr><td>Obsolete:</td>                  <td><span class='cplate bgbrown'>&nbsp;&nbsp;&nbsp;&nbsp;</span></td></tr>     </table>";
    function showElem(id) {
        var elem = document.getElementById(id);
        elem.innerHTML = eval(id+"_html");
        elem.style.visibility='visible';
    }
    function hideElem(id) {
        var elem = document.getElementById(id);
        elem.style.visibility='hidden';        
        elem.innerHTML = "";
    }
    // -->
    </script><span class="pre noprint docinfo">[<a href="https://www.rfc-editor.org" title="RFC Editor">RFC Home</a>] [<a href=/rfc/rfc784.txt>TEXT</a>|<a href=/rfc/pdfrfc/rfc784.txt.pdf>PDF</a>|<a href=/rfc/rfc784.html>HTML</a>] [<a href='https://datatracker.ietf.org/doc/rfc784' title='IETF Datatracker information for this document'>Tracker</a>] [<a href="https://datatracker.ietf.org/ipr/search/?rfc=784&submit=rfc" title="IPR disclosures related to this document">IPR</a>]                              </span><br/><span class="pre noprint docinfo">                                                                        </span><br /><span class="pre noprint docinfo">                                                                 UNKNOWN</span><br /><span class="pre noprint docinfo">                                                                        </span><pre>Network Working Group                                         S. Sluizer
Request for Comments: 784                                      J. Postel
                                                                     ISI
                                                               July 1981

                        <span class="h1">MAIL TRANSFER PROTOCOL:</span>
                       <span class="h1">ISI TOPS20 IMPLEMENTATION</span>


We are creating an implementation of MTP for TOPS20.  The programs are
written in BLISS-10.  This implementation supports the MTP user and
server functions using both TCP and NCP transport services, and provides
interfaces to other mail delivery mechanisms.

The transport services (NCP, TCP, etc.), are used to establish
communication between MTP sender and MTP receiver programs.  These
communication paths will be called channels in the rest of this memo.

Our model of operation is that mail sources will create mail files in
user directories.  The mail sources are both user mail composition
programs (like Hermes, MM, SNDMSG), and system network mail receiving
programs which accept mail from various input channels.  The mail files
are processed by a background program which dispatches mail to various
output channels.  There is also a user version of the dispatcher to send
mail at once (provided the necessary channel is available).

To take advantage of MTP's multi-recipient feature, the mail consists of
two files.  The first is a control file which contains the delivery
information and a pointer to the second file.  The second file contains
the mail data (including the <a href="./rfc733">RFC 733</a> header) to be delivered.

The reason for using two files is that the control information must be
modified as the mail is processed while the mail data only needs to be
read (although the file is eventually deleted or renamed).  For example,
a message may be sent to different recipients via different channels.
If one of the channels is not available, the control file must be
modified to mark or delete the recipients to whom the mail has been sent
and keep the recipient information available for those recipients not
yet sent.  In a a future implementation of the dispatcher, the control
information may be moved to a master table in its data area to optimally
schedule output channel use.

The dispatcher makes its decision about how to send mail to each
recipient by consulting a table that indicates for each host its ability
to accept mail via (1) MTP on TCP, (2) MTP on NCP, or (3) FTP on NCP
(i.e., the old way).  There is also a table for other cases (e.g.,
delivery to hosts in England via another mail transmission system
created by UCL).






Sluizer &amp; Postel                                                Page [1]</pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'>July 1981                                                        <a href="./rfc784">RFC 784</a>
ISI TOPS20 Implementation



The individual pieces of this system are:

   1.  MTP receiver for TCP.

   2.  MTP receiver for NCP.

   3.  Dispatcher.

   4.  MTP sender for TCP.

   5.  MTP sender for NCP.

   6.  Mail composition programs (MM, HERMES, MSG, SNDMSG, ...).

   7.  User mailbox files.

   8.  Pending Mail files.

   9.  Other Mail sources.

   10. Other Mail sinks.

   11. Host Mail Capability table.

   12. Host special processing tables.

We are building 1 through 5, hope that others will adapt 6 to this
system (a version of MM has been adapted at ISI), using the existing 7,
defining and using 8, providing interfaces for 9 and 10 as requested,
and creating and using 11 and 12.



















Page [2]                                                Sluizer &amp; Postel</pre>
<hr class='noprint'/><!--NewPage--><pre class='newpage'><a href="./rfc784">RFC 784</a>                                                        July 1981
                                                  Mail Transfer Protocol



           +-----+   +-----+   +------+   +------+
           | MTP |   | MTP |   | USER |   |OTHER |
           | TCP |   | NCP |   | MAIL |   |MAIL  |
           | RCV |   | RCV |   | PGM  |   |SOURCE|
           +-----+   +-----+   +------+   +------+
              |         |          |         |
              |         |          |         |
              |         |          |         |
              v         v          v         v
            +----+    +----+     +----+     +----+
            |    |    |    |     |    |     |    |
Pending   +----+ |  +----+ |   +----+ |   +----+ |
Files     |    |-+  |    |-+   |    |-+   |    |-+
          |    |    |    |     |    |     |    |
          +----+    +----+     +----+     +----+
                \      |         |       /
                 \     |         |      /
                  \    |         |     /
                   v   v         v    v

                    +------------------+       TABLES
                    |                  |       +----+
                    |    DISPATCHER    |&lt;-----&gt;|    |---+
                    |                  |       |    |   |
                    +------------------+       +----+   |
                    /      /     \      \          +----+
                   /      /       \      \
                  /      /         \      \
                 v      v           v      v
           +-----+   +-----+   +-------+   +-----+
           | MTP |   | MTP |   | LOCAL |   |OTHER|
           | TCP |   | NCP |   |MAILBOX|   |MAIL |
           | SND |   | SND |   | FILES |   |SINK |
           +-----+   +-----+   +-------+   +-----+

Note that current implementation the dispatcher and the senders for
MTP-on-TCP and MTP-on-TCP are combined in one program.












Sluizer &amp; Postel                                                Page [3]
</pre>
